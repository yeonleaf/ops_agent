2025-09-01 21:16:48,410 - INFO - HTTP Request: POST https://skcc-atl-master-openai-01.openai.azure.com/openai/deployments/gpt-4.1/chat/completions?api-version=2024-10-21 "HTTP/1.1 200 OK"
2025-09-01 21:16:48,530 - INFO - ProcessTicketsTool 실행: 안 읽은 메일 가져와서 티켓 보여줘
2025-09-01 21:16:48,531 - INFO - LLM 쿼리 파싱 시작: '안 읽은 메일 가져와서 티켓 보여줘'
2025-09-01 21:16:48,531 - INFO - session_state.llm 존재 여부: True
2025-09-01 21:16:48,531 - INFO - session_state.llm 값: client=<openai.resources.chat.completions.completions.Completions object at 0x13b559d10> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x13b55a710> root_client=<openai.lib.azure.AzureOpenAI object at 0x13b559450> root_async_client=<openai.lib.azure.AsyncAzureOpenAI object at 0x13b559e50> temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') disabled_params={'parallel_tool_calls': None} azure_endpoint='https://skcc-atl-master-openai-01.openai.azure.com' deployment_name='gpt-4.1' openai_api_version='2024-10-21' openai_api_type='azure'
2025-09-01 21:16:48,531 - INFO - LLM 기반 파싱 시도 중...
2025-09-01 21:16:49,109 - INFO - HTTP Request: POST https://skcc-atl-master-openai-01.openai.azure.com/openai/deployments/gpt-4.1/chat/completions?api-version=2024-10-21 "HTTP/1.1 200 OK"
2025-09-01 21:16:49,111 - INFO - LLM 응답: {{
    "action": "process_tickets",
    "filters": {{
        "is_read": false
    }}
}}
2025-09-01 21:16:49,112 - INFO - LLM 파싱 결과: {'action': 'process_tickets', 'filters': {'is_read': False}}
2025-09-01 21:16:49,112 - INFO - LLM 파싱 성공: {'action': 'process_tickets', 'filters': {'is_read': False}}
2025-09-01 21:16:49,112 - INFO - 파싱된 파라미터: {'action': 'process_tickets', 'filters': {'is_read': False}}
2025-09-01 21:16:50,381 - INFO - HTTP Request: POST https://skcc-atl-master-openai-01.openai.azure.com/openai/deployments/gpt-4.1/chat/completions?api-version=2024-10-21 "HTTP/1.1 200 OK"
2025-09-01 21:16:50,383 - INFO - LLM 액션 결정 응답: {{
    "action": "view_tickets",
    "reasoning": "사용자가 '티켓 보여줘'라고 요청했으므로, 이미 생성된 티켓 목록을 조회하는 것이 적합합니다. '안 읽은 메일'은 티켓과 연결된 메일의 상태를 의미할 수 있지만, 최종적으로 보고 싶은 것은 티켓입니다.",
    "query_type": "ticket_query"
}}
2025-09-01 21:16:50,384 - INFO - LLM 액션 결정 결과: view_tickets, 이유: 사용자가 '티켓 보여줘'라고 요청했으므로, 이미 생성된 티켓 목록을 조회하는 것이 적합합니다. '안 읽은 메일'은 티켓과 연결된 메일의 상태를 의미할 수 있지만, 최종적으로 보고 싶은 것은 티켓입니다.
2025-09-01 21:16:50,384 - INFO - ProcessTicketsTool에서 LLM 기반 액션 결정: view_tickets
2025-09-01 21:16:50,384 - INFO - 메일 쿼리 핸들러 실행: action='view_tickets', filters={'is_read': False}
2025-09-01 21:16:50,384 - INFO - view_tickets 액션: 기존 티켓 조회
2025-09-01 21:16:50,404 - INFO - 기존 티켓 9개 조회 완료
2025-09-01 21:16:50,404 - INFO - 핸들러 실행 결과: {'display_mode': 'tickets', 'tickets': [{'ticket_id': 9, 'message_id': 'AAMkADY1YmE3N2FhLWEwMzQtNDNkMC04Mzg3LTczMTdiMjk2NzRhMABGAAAAAADfsy0XtCMZS5XonZkyBLu6BwDUwywT0x3WRJXfefGC8Xz-AAAAAAEMAADUwywT0x3WRJXfefGC8Xz-AAAss2kSAAA=', 'title': 'You have late tasks', 'status': 'pending', 'priority': 'High', 'labels': ['email-generated', 'auto-classified', 'task-management', 'approved'], 'reporter': 'Microsoft on behalf of your organization', 'description': 'Hi Adele. You have 4 tasks due. You have late tasks Book Valet Service for Event In the plan Event Plan 8/4/2025 2 days late Web Media Kit In the plan Event Plan 7/30/2025 7 days late Book Valet Service for Event In the plan Event Plan 8/4/2025 2 days late Web Media Kit In the plan Event Plan 7/30/2025 7 days late Open in Browser Open in Teams you have subscribed to Microsoft Office 365. Notification settings: Go to Planner , select the gear icon, then select "Notifications". Privacy Statement This email is generated through Contoso\'s use of Microsoft 365 and may contain content that is controlled by Contoso.', 'created_at': '2025-09-01T21:08:21.173134', 'updated_at': '2025-09-01T21:15:14.622385'}, {'ticket_id': 8, 'message_id': 'AAMkADY1YmE3N2FhLWEwMzQtNDNkMC04Mzg3LTczMTdiMjk2NzRhMABGAAAAAADfsy0XtCMZS5XonZkyBLu6BwDUwywT0x3WRJXfefGC8Xz-AAAAAAEMAADUwywT0x3WRJXfefGC8Xz-AAAss2kTAAA=', 'title': '', 'status': 'pending', 'priority': 'Medium', 'labels': ['email-generated', 'auto-classified', 'approved'], 'reporter': 'md oydur', 'description': '', 'created_at': '2025-09-01T21:08:20.893374', 'updated_at': '2025-09-01T21:15:14.622669'}, {'ticket_id': 7, 'message_id': 'AAMkADY1YmE3N2FhLWEwMzQtNDNkMC04Mzg3LTczMTdiMjk2NzRhMABGAAAAAADfsy0XtCMZS5XonZkyBLu6BwDUwywT0x3WRJXfefGC8Xz-AAAAAAEMAADUwywT0x3WRJXfefGC8Xz-AAAsxV9FAAA=', 'title': 'You have late tasks', 'status': 'pending', 'priority': 'High', 'labels': ['email-generated', 'auto-classified', 'task-management', 'approved'], 'reporter': 'Microsoft on behalf of your organization', 'description': 'Hi Adele. You have 2 tasks due. You have late tasks Book Valet Service for Event In the plan Event Plan 8/4/2025 7 days late Book Valet Service for Event In the plan Event Plan 8/4/2025 7 days late Open in Browser Open in Teams you have subscribed to Microsoft Office 365. Notification settings: Go to Planner , select the gear icon, then select "Notifications". Privacy Statement This email is generated through Contoso\'s use of Microsoft 365 and may contain content that is controlled by Contoso.', 'created_at': '2025-09-01T21:08:20.619086', 'updated_at': '2025-09-01T21:15:14.622680'}, {'ticket_id': 6, 'message_id': 'AAMkADY1YmE3N2FhLWEwMzQtNDNkMC04Mzg3LTczMTdiMjk2NzRhMABGAAAAAADfsy0XtCMZS5XonZkyBLu6BwDUwywT0x3WRJXfefGC8Xz-AAAAAAEMAADUwywT0x3WRJXfefGC8Xz-AAAvREoPAAA=', 'title': 'Test Email', 'status': 'pending', 'priority': 'Medium', 'labels': ['email-generated', 'auto-classified', 'approved'], 'reporter': 'Nilesh Matkari', 'description': 'Testing email !!! Nilesh Matkari Sr Director of Engineering | creative capsule m: +91 738-735-3103 | www.creativecapsule.com -------------------------------------------------------------- Creative Capsule LLC 10875 Benson Drive, Suite #275, Overland Park, Kansas 66210. USA. Creative Capsule GmbH Feldstrasse 24, CH-8580 Amriswil. --------------------------------------------------------------', 'created_at': '2025-09-01T21:08:20.334028', 'updated_at': '2025-09-01T21:15:14.622688'}, {'ticket_id': 5, 'message_id': 'AAMkADY1YmE3N2FhLWEwMzQtNDNkMC04Mzg3LTczMTdiMjk2NzRhMABGAAAAAADfsy0XtCMZS5XonZkyBLu6BwDUwywT0x3WRJXfefGC8Xz-AAAAAAEMAADUwywT0x3WRJXfefGC8Xz-AAAvREoQAAA=', 'title': 'You have upcoming tasks due', 'status': 'pending', 'priority': 'High', 'labels': ['email-generated', 'auto-classified', 'task-management', 'approved'], 'reporter': 'Microsoft on behalf of your organization', 'description': 'Hi Adele. You have 2 tasks due. You have upcoming tasks Order Patti Smoothie Stuff In the plan PattiF Logistics 8/21/2025 Due in 7 days Order Patti Smoothie Stuff In the plan Logistics 8/21/2025 Due in 7 days Open in Browser Open in Teams you have subscribed to Microsoft Office 365. Notification settings: Go to Planner , select the gear icon, then select "Notifications". Privacy Statement This email is generated through Contoso\'s use of Microsoft 365 and may contain content that is controlled by Contoso.', 'created_at': '2025-09-01T21:08:19.920616', 'updated_at': '2025-09-01T21:15:14.622694'}, {'ticket_id': 4, 'message_id': '198ff17f55b68052', 'title': 'PRD NCMSAPI-BATCH 서버 다운 문의', 'status': 'pending', 'priority': 'Highest', 'labels': ['NCMSAPI', 'Batch', 'Incident', 'NCMS_운영지원'], 'reporter': '"조주연" <juyeonjo633@gmail.com>', 'description': '', 'created_at': '2025-08-31T16:47:40.329096', 'updated_at': '2025-09-01T21:07:44.195101'}, {'ticket_id': 3, 'message_id': '198f9635ee865f38', 'title': '서버 접속 불가 및 기능 제안', 'status': 'pending', 'priority': 'High', 'labels': ['서버접속불가', '기능개선요청'], 'reporter': '"조주연" <juyeonjo633@gmail.com>', 'description': '', 'created_at': '2025-08-31T16:42:54.052923', 'updated_at': '2025-08-31T16:42:54.052923'}, {'ticket_id': 2, 'message_id': '198fe67462dbf92b', 'title': 'PrePRD NCMSAPI-BATCH 서버 이상 확인', 'status': 'pending', 'priority': 'High', 'labels': ['PrePRD', 'NCMSAPI', 'Batch', 'ServerError'], 'reporter': '"조주연" <juyeonjo633@gmail.com>', 'description': '', 'created_at': '2025-08-31T16:42:41.504553', 'updated_at': '2025-08-31T16:42:41.504553'}, {'ticket_id': 1, 'message_id': '198fe6de5233d1f1', 'title': 'STG NCMSAPI-BATCH 서버 오류 문의', 'status': 'pending', 'priority': 'High', 'labels': ['STG', 'NCMSAPI', 'Batch', 'Incident'], 'reporter': '"조주연" <juyeonjo633@gmail.com>', 'description': '', 'created_at': '2025-08-31T16:42:39.815132', 'updated_at': '2025-08-31T16:42:39.815132'}], 'message': '기존 티켓 9개를 조회했습니다.'}
2025-09-01 21:16:50,404 - INFO - ProcessTicketsTool - 티켓 개수 확인: 9
2025-09-01 21:16:50,405 - INFO - 세션에 직접 저장 완료: True
2025-09-01 21:16:50,405 - INFO - 반환할 JSON: {{
  "display_mode": "tickets",
  "tickets": [
    {{
      "ticket_id": 9,
      "message_id": "AAMkADY1YmE3N2FhLWEwMzQtNDNkMC04Mzg3LTczMTdiMjk2NzRhMABGAAAAAADfsy0XtCMZS5XonZkyBLu6BwDUwywT0x3WRJXfefGC8Xz-AAAAAAEMAADUwywT0x3WRJXfefGC8Xz-AAAss2kSAAA=",
      "title": "You have late tasks",
      "status": "pending",
      "priority": "High",
      "labels": [
        "email-generated",
        "auto-classified",
        "task-management",
        "approved"
      ],
      "reporter": "Microsoft on behalf of your organization",
      "description": "Hi Adele. You have 4 tasks due. You have late tasks Book Valet Service for Event In the plan Event Plan 8/4/2025 2 days late Web Media Kit In the plan Event Plan 7/30/2025 7 days late Book Valet Service for Event In the plan Event Plan 8/4/2025 2 days late Web Media Kit In the plan Event Plan 7/30/2025 7 days late Open in Browser Open in Teams you have subscribed to Microsoft Office 365. Notification settings: Go to Planner , select the gear icon, then select \"Notifications\". Privacy Statement This email is generated through Contoso's use of Microsoft 365 and may contain content that is controlled by Contoso.",
      "created_at": "2025-09-01T21:08:21.173134",
      "updated_at": "2025-09-01T21:15:14.622385"
    }},
    {{
      "ticket_id": 8,
      "message_id": "AAMkADY1YmE3N2FhLWEwMzQtNDNkMC04Mzg3LTczMTdiMjk2NzRhMABGAAAAAADfsy0XtCMZS5XonZkyBLu6BwDUwywT0x3WRJXfefGC8Xz-AAAAAAEMAADUwywT0x3WRJXfefGC8Xz-AAAss2kTAAA=",
      "title": "",
      "status": "pending",
      "priority": "Medium",
      "labels": [
        "email-generated",
        "auto-classified",
        "approved"
      ],
      "reporter": "md oydur",
      "description": "",
      "created_at": "2025-09-01T21:08:20.893374",
      "updated_at": "2025-09-01T21:15:14.622669"
    }},
    {{
      "ticket_id": 7,
      "message_id": "AAMkADY1YmE3N2FhLWEwMzQtNDNkMC04Mzg3LTczMTdiMjk2NzRhMABGAAAAAADfsy0XtCMZS5XonZkyBLu6BwDUwywT0x3WRJXfefGC8Xz-AAAAAAEMAADUwywT0x3WRJXfefGC8Xz-AAAsxV9FAAA=",
      "title": "You have late tasks",
      "status": "pending",
      "priority": "High",
      "labels": [
        "email-generated",
        "auto-classified",
        "task-management",
        "approved"
      ],
      "reporter": "Microsoft on behalf of your organization",
      "description": "Hi Adele. You have 2 tasks due. You have late tasks Book Valet Service for Event In the plan Event Plan 8/4/2025 7 days late Book Valet Service for Event In the plan Event Plan 8/4/2025 7 days late Open in Browser Open in Teams you have subscribed to Microsoft Office 365. Notification settings: Go to Planner , select the gear icon, then select \"Notifications\". Privacy Statement This email is generated through Contoso's use of Microsoft 365 and may contain content that is controlled by Contoso.",
      "created_at": "2025-09-01T21:08:20.619086",
      "updated_at": "2025-09-01T21:15:14.622680"
    }},
    {{
      "ticket_id": 6,
      "message_id": "AAMkADY1YmE3N2FhLWEwMzQtNDNkMC04Mzg3LTczMTdiMjk2NzRhMABGAAAAAADfsy0XtCMZS5XonZkyBLu6BwDUwywT0x3WRJXfefGC8Xz-AAAAAAEMAADUwywT0x3WRJXfefGC8Xz-AAAvREoPAAA=",
      "title": "Test Email",
      "status": "pending",
      "priority": "Medium",
      "labels": [
        "email-generated",
        "auto-classified",
        "approved"
      ],
      "reporter": "Nilesh Matkari",
      "description": "Testing email !!! Nilesh Matkari Sr Director of Engineering | creative capsule m: +91 738-735-3103 | www.creativecapsule.com -------------------------------------------------------------- Creative Capsule LLC 10875 Benson Drive, Suite #275, Overland Park, Kansas 66210. USA. Creative Capsule GmbH Feldstrasse 24, CH-8580 Amriswil. --------------------------------------------------------------",
      "created_at": "2025-09-01T21:08:20.334028",
      "updated_at": "2025-09-01T21:15:14.622688"
    }},
    {{
      "ticket_id": 5,
      "message_id": "AAMkADY1YmE3N2FhLWEwMzQtNDNkMC04Mzg3LTczMTdiMjk2NzRhMABGAAAAAADfsy0XtCMZS5XonZkyBLu6BwDUwywT0x3WRJXfefGC8Xz-AAAAAAEMAADUwywT0x3WRJXfefGC8Xz-AAAvREoQAAA=",
      "title": "You have upcoming tasks due",
      "status": "pending",
      "priority": "High",
      "labels": [
        "email-generated",
        "auto-classified",
        "task-management",
        "approved"
      ],
      "reporter": "Microsoft on behalf of your organization",
      "description": "Hi Adele. You have 2 tasks due. You have upcoming tasks Order Patti Smoothie Stuff In the plan PattiF Logistics 8/21/2025 Due in 7 days Order Patti Smoothie Stuff In the plan Logistics 8/21/2025 Due in 7 days Open in Browser Open in Teams you have subscribed to Microsoft Office 365. Notification settings: Go to Planner , select the gear icon, then select \"Notifications\". Privacy Statement This email is generated through Contoso's use of Microsoft 365 and may contain content that is controlled by Contoso.",
      "created_at": "2025-09-01T21:08:19.920616",
      "updated_at": "2025-09-01T21:15:14.622694"
    }},
    {{
      "ticket_id": 4,
      "message_id": "198ff17f55b68052",
      "title": "PRD NCMSAPI-BATCH 서버 다운 문의",
      "status": "pending",
      "priority": "Highest",
      "labels": [
        "NCMSAPI",
        "Batch",
        "Incident",
        "NCMS_운영지원"
      ],
      "reporter": "\"조주연\" <juyeonjo633@gmail.com>",
      "description": "",
      "created_at": "2025-08-31T16:47:40.329096",
      "updated_at": "2025-09-01T21:07:44.195101"
    }},
    {{
      "ticket_id": 3,
      "message_id": "198f9635ee865f38",
      "title": "서버 접속 불가 및 기능 제안",
      "status": "pending",
      "priority": "High",
      "labels": [
        "서버접속불가",
        "기능개선요청"
      ],
      "reporter": "\"조주연\" <juyeonjo633@gmail.com>",
      "description": "",
      "created_at": "2025-08-31T16:42:54.052923",
      "updated_at": "2025-08-31T16:42:54.052923"
    }},
    {{
      "ticket_id": 2,
      "message_id": "198fe67462dbf92b",
      "title": "PrePRD NCMSAPI-BATCH 서버 이상 확인",
      "status": "pending",
      "priority": "High",
      "labels": [
        "PrePRD",
        "NCMSAPI",
        "Batch",
        "ServerError"
      ],
      "reporter": "\"조주연\" <juyeonjo633@gmail.com>",
      "description": "",
      "created_at": "2025-08-31T16:42:41.504553",
      "updated_at": "2025-08-31T16:42:41.504553"
    }},
    {{
      "ticket_id": 1,
      "message_id": "198fe6de5233d1f1",
      "title": "STG NCMSAPI-BATCH 서버 오류 문의",
      "status": "pending",
      "priority": "High",
      "labels": [
        "STG",
        "NCMSAPI",
        "Batch",
        "Incident"
      ],
      "reporter": "\"조주연\" <juyeonjo633@gmail.com>",
      "description": "",
      "created_at": "2025-08-31T16:42:39.815132",
      "updated_at": "2025-08-31T16:42:39.815132"
    }}
  ],
  "message": "기존 티켓 9개를 조회했습니다.",
  "ui_mode": "button_list"
}}
2025-09-01 21:16:50,834 - INFO - HTTP Request: POST https://skcc-atl-master-openai-01.openai.azure.com/openai/deployments/gpt-4.1/chat/completions?api-version=2024-10-21 "HTTP/1.1 200 OK"
2025-09-01 21:16:51,139 - INFO - 도구가 사용되지 않음. LLM 직접 응답: [process_tickets_tool] 도구를 사용하여 요청하신 정보를 처리했습니다. 결과는 화면에 표시됩니다.
2025-09-01 21:17:03,303 - INFO - file_cache is only supported with oauth2client<4.0.0
2025-09-01 21:17:03,611 - INFO - file_cache is only supported with oauth2client<4.0.0
