2025-09-02 08:16:21,301 - INFO - HTTP Request: POST https://skcc-atl-master-openai-01.openai.azure.com/openai/deployments/gpt-4.1/chat/completions?api-version=2024-10-21 "HTTP/1.1 200 OK"
2025-09-02 08:16:21,392 - INFO - ProcessTicketsTool 실행: 안 읽은 메일 가져와서 티켓 만들어줘
2025-09-02 08:16:21,393 - INFO - LLM 쿼리 파싱 시작: '안 읽은 메일 가져와서 티켓 만들어줘'
2025-09-02 08:16:21,393 - INFO - session_state.llm 존재 여부: True
2025-09-02 08:16:21,393 - INFO - session_state.llm 값: client=<openai.resources.chat.completions.completions.Completions object at 0x14d59bbf0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x14d59b890> root_client=<openai.lib.azure.AzureOpenAI object at 0x12f8b5bf0> root_async_client=<openai.lib.azure.AsyncAzureOpenAI object at 0x12f8b6690> temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') disabled_params={'parallel_tool_calls': None} azure_endpoint='https://skcc-atl-master-openai-01.openai.azure.com' deployment_name='gpt-4.1' openai_api_version='2024-10-21' openai_api_type='azure'
2025-09-02 08:16:21,393 - INFO - LLM 기반 파싱 시도 중...
2025-09-02 08:16:21,952 - INFO - HTTP Request: POST https://skcc-atl-master-openai-01.openai.azure.com/openai/deployments/gpt-4.1/chat/completions?api-version=2024-10-21 "HTTP/1.1 200 OK"
2025-09-02 08:16:21,955 - INFO - LLM 응답: {{
    "action": "classify",
    "filters": {{
        "is_read": false
    }}
}}
2025-09-02 08:16:21,956 - INFO - LLM 파싱 결과: {'action': 'classify', 'filters': {'is_read': False}}
2025-09-02 08:16:21,956 - INFO - LLM 파싱 성공: {'action': 'classify', 'filters': {'is_read': False}}
2025-09-02 08:16:21,956 - INFO - 파싱된 파라미터: {'action': 'classify', 'filters': {'is_read': False}}
2025-09-02 08:16:22,817 - INFO - HTTP Request: POST https://skcc-atl-master-openai-01.openai.azure.com/openai/deployments/gpt-4.1/chat/completions?api-version=2024-10-21 "HTTP/1.1 200 OK"
2025-09-02 08:16:22,819 - INFO - LLM 액션 결정 응답: {{
    "action": "process_tickets",
    "reasoning": "사용자가 '안 읽은 메일'을 가져와서 티켓을 만들어달라고 요청했으므로, 메일을 티켓으로 변환하는 업무 처리에 해당합니다.",
    "query_type": "ticket_creation"
}}
2025-09-02 08:16:22,819 - INFO - LLM 액션 결정 결과: process_tickets, 이유: 사용자가 '안 읽은 메일'을 가져와서 티켓을 만들어달라고 요청했으므로, 메일을 티켓으로 변환하는 업무 처리에 해당합니다.
2025-09-02 08:16:22,819 - INFO - ProcessTicketsTool에서 LLM 기반 액션 결정: process_tickets
2025-09-02 08:16:22,819 - INFO - 메일 쿼리 핸들러 실행: action='process_tickets', filters={'is_read': False}
2025-09-02 08:16:22,819 - INFO - process_tickets 액션 시작: provider=gmail, params={'action': 'process_tickets', 'filters': {'is_read': False}}
2025-09-02 08:16:22,819 - INFO - process_emails_with_ticket_logic 시작: provider=gmail, query={'action': 'process_tickets', 'filters': {'is_read': False}}
2025-09-02 08:16:22,819 - INFO - 실제 사용할 쿼리: 오늘 처리할 티켓 목록
2025-09-02 08:16:22,819 - INFO - RDB에서 오늘의 티켓 조회 시작...
2025-09-02 08:16:22,824 - INFO - 오늘 생성된 티켓 4개 발견
2025-09-02 08:16:22,825 - INFO - RDB 기반 티켓 조회 완료: 4개
2025-09-02 08:16:22,825 - INFO - process_emails_with_ticket_logic 결과: {'display_mode': 'tickets', 'tickets': [{'ticket_id': 4, 'title': '서버 접속 불가 및 기능 제안', 'description': '', 'status': 'pending', 'priority': 'Highest (서버 접속 불가), Medium (버튼 색상 변경)', 'type': 'Bug (서버 접속 불가), Improvement (버튼 색상 변경)', 'reporter': '"조주연" <juyeonjo633@gmail.com>', 'labels': [], 'created_at': '2025-09-02T06:25:17.401180', 'updated_at': '2025-09-02T08:07:51.944756', 'message_id': '198f9635ee865f38'}, {'ticket_id': 3, 'title': 'PrePRD NCMSAPI-BATCH 서버 이상 확인', 'description': '', 'status': 'pending', 'priority': 'High', 'type': 'Bug', 'reporter': '"조주연" <juyeonjo633@gmail.com>', 'labels': ['서버점검', '에러409', 'NCMS_운영지원'], 'created_at': '2025-09-02T06:25:04.408232', 'updated_at': '2025-09-02T08:08:44.168016', 'message_id': '198fe67462dbf92b'}, {'ticket_id': 2, 'title': 'STG NCMSAPI-BATCH 서버 오류 문의', 'description': '', 'status': 'pending', 'priority': 'High', 'type': 'Bug', 'reporter': '"조주연" <juyeonjo633@gmail.com>', 'labels': [], 'created_at': '2025-09-02T06:25:02.128991', 'updated_at': '2025-09-02T07:21:44.562831', 'message_id': '198fe6de5233d1f1'}, {'ticket_id': 1, 'title': 'PRD NCMSAPI-BATCH 서버 다운 문의', 'description': '', 'status': 'pending', 'priority': 'Highest', 'type': 'Bug', 'reporter': '"조주연" <juyeonjo633@gmail.com>', 'labels': ['NCMS_운영지원'], 'created_at': '2025-09-02T06:24:59.624235', 'updated_at': '2025-09-02T08:02:35.635800', 'message_id': '198ff17f55b68052'}], 'new_tickets_created': 4, 'existing_tickets_found': 0, 'summary': {'total_tasks': 4}, 'message': '오늘 생성된 티켓 4개를 찾았습니다.'}
2025-09-02 08:16:22,825 - INFO - process_tickets - 티켓 개수: 4
2025-09-02 08:16:22,825 - INFO - 핸들러 실행 결과: {'display_mode': 'tickets', 'tickets': [{'ticket_id': 4, 'title': '서버 접속 불가 및 기능 제안', 'description': '', 'status': 'pending', 'priority': 'Highest (서버 접속 불가), Medium (버튼 색상 변경)', 'type': 'Bug (서버 접속 불가), Improvement (버튼 색상 변경)', 'reporter': '"조주연" <juyeonjo633@gmail.com>', 'labels': [], 'created_at': '2025-09-02T06:25:17.401180', 'updated_at': '2025-09-02T08:07:51.944756', 'message_id': '198f9635ee865f38'}, {'ticket_id': 3, 'title': 'PrePRD NCMSAPI-BATCH 서버 이상 확인', 'description': '', 'status': 'pending', 'priority': 'High', 'type': 'Bug', 'reporter': '"조주연" <juyeonjo633@gmail.com>', 'labels': ['서버점검', '에러409', 'NCMS_운영지원'], 'created_at': '2025-09-02T06:25:04.408232', 'updated_at': '2025-09-02T08:08:44.168016', 'message_id': '198fe67462dbf92b'}, {'ticket_id': 2, 'title': 'STG NCMSAPI-BATCH 서버 오류 문의', 'description': '', 'status': 'pending', 'priority': 'High', 'type': 'Bug', 'reporter': '"조주연" <juyeonjo633@gmail.com>', 'labels': [], 'created_at': '2025-09-02T06:25:02.128991', 'updated_at': '2025-09-02T07:21:44.562831', 'message_id': '198fe6de5233d1f1'}, {'ticket_id': 1, 'title': 'PRD NCMSAPI-BATCH 서버 다운 문의', 'description': '', 'status': 'pending', 'priority': 'Highest', 'type': 'Bug', 'reporter': '"조주연" <juyeonjo633@gmail.com>', 'labels': ['NCMS_운영지원'], 'created_at': '2025-09-02T06:24:59.624235', 'updated_at': '2025-09-02T08:02:35.635800', 'message_id': '198ff17f55b68052'}], 'new_tickets_created': 4, 'existing_tickets_found': 0, 'summary': {'total_tasks': 4}, 'message': '오늘 생성된 티켓 4개를 찾았습니다.'}
2025-09-02 08:16:22,825 - INFO - ProcessTicketsTool - 티켓 개수 확인: 4
2025-09-02 08:16:22,826 - INFO - 세션에 직접 저장 완료: True
2025-09-02 08:16:22,826 - INFO - 반환할 JSON: {{
  "display_mode": "tickets",
  "tickets": [
    {{
      "ticket_id": 4,
      "title": "서버 접속 불가 및 기능 제안",
      "description": "",
      "status": "pending",
      "priority": "Highest (서버 접속 불가), Medium (버튼 색상 변경)",
      "type": "Bug (서버 접속 불가), Improvement (버튼 색상 변경)",
      "reporter": "\"조주연\" <juyeonjo633@gmail.com>",
      "labels": [],
      "created_at": "2025-09-02T06:25:17.401180",
      "updated_at": "2025-09-02T08:07:51.944756",
      "message_id": "198f9635ee865f38"
    }},
    {{
      "ticket_id": 3,
      "title": "PrePRD NCMSAPI-BATCH 서버 이상 확인",
      "description": "",
      "status": "pending",
      "priority": "High",
      "type": "Bug",
      "reporter": "\"조주연\" <juyeonjo633@gmail.com>",
      "labels": [
        "서버점검",
        "에러409",
        "NCMS_운영지원"
      ],
      "created_at": "2025-09-02T06:25:04.408232",
      "updated_at": "2025-09-02T08:08:44.168016",
      "message_id": "198fe67462dbf92b"
    }},
    {{
      "ticket_id": 2,
      "title": "STG NCMSAPI-BATCH 서버 오류 문의",
      "description": "",
      "status": "pending",
      "priority": "High",
      "type": "Bug",
      "reporter": "\"조주연\" <juyeonjo633@gmail.com>",
      "labels": [],
      "created_at": "2025-09-02T06:25:02.128991",
      "updated_at": "2025-09-02T07:21:44.562831",
      "message_id": "198fe6de5233d1f1"
    }},
    {{
      "ticket_id": 1,
      "title": "PRD NCMSAPI-BATCH 서버 다운 문의",
      "description": "",
      "status": "pending",
      "priority": "Highest",
      "type": "Bug",
      "reporter": "\"조주연\" <juyeonjo633@gmail.com>",
      "labels": [
        "NCMS_운영지원"
      ],
      "created_at": "2025-09-02T06:24:59.624235",
      "updated_at": "2025-09-02T08:02:35.635800",
      "message_id": "198ff17f55b68052"
    }}
  ],
  "new_tickets_created": 4,
  "existing_tickets_found": 0,
  "summary": {{
    "total_tasks": 4
  }},
  "message": "오늘 생성된 티켓 4개를 찾았습니다.",
  "ui_mode": "button_list"
}}
2025-09-02 08:16:23,197 - INFO - HTTP Request: POST https://skcc-atl-master-openai-01.openai.azure.com/openai/deployments/gpt-4.1/chat/completions?api-version=2024-10-21 "HTTP/1.1 200 OK"
2025-09-02 08:16:23,473 - INFO - 도구가 사용되지 않음. LLM 직접 응답: [process_tickets_tool] 도구를 사용하여 안 읽은 메일을 티켓으로 생성했습니다. 결과는 화면에 표시됩니다.
2025-09-02 08:16:29,858 - INFO - file_cache is only supported with oauth2client<4.0.0
2025-09-02 08:16:30,150 - INFO - file_cache is only supported with oauth2client<4.0.0
