# mcp-agent 설정 파일
# Gmail 연동을 위한 MCP 서버 설정

mcp:
  servers:
    gmail:
      command: "uvx"
      args: ["mcp-server-gmail"]
      description: "Gmail 메일 서버 연동"
      env:
        GMAIL_CLIENT_ID: "${GMAIL_CLIENT_ID}"
        GMAIL_CLIENT_SECRET: "${GMAIL_CLIENT_SECRET}"
        GMAIL_REFRESH_TOKEN: "${GMAIL_REFRESH_TOKEN}"
        GMAIL_ACCESS_TOKEN: "${GMAIL_ACCESS_TOKEN}"
    
    # 추가 MCP 서버들
    filesystem:
      command: "uvx"
      args: ["mcp-server-filesystem"]
      description: "파일 시스템 접근"
    
    fetch:
      command: "uvx"
      args: ["mcp-server-fetch"]
      description: "웹 콘텐츠 가져오기"

# 로깅 설정
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

# 에이전트 설정
agents:
  gmail_ticket_agent:
    name: "Gmail 티켓 에이전트"
    instruction: "Gmail에서 티켓 관련 메일을 찾아서 티켓으로 변환합니다."
    server_names: ["gmail", "filesystem"]
    functions:
      - fetch_unread_emails
      - filter_ticket_emails
      - convert_to_tickets
      - save_tickets

# 워크플로우 설정
workflows:
  email_to_ticket:
    name: "메일을 티켓으로 변환"
    steps:
      - name: "메일 가져오기"
        agent: "gmail_ticket_agent"
        function: "fetch_unread_emails"
      - name: "티켓 필터링"
        agent: "gmail_ticket_agent"
        function: "filter_ticket_emails"
      - name: "티켓 변환"
        agent: "gmail_ticket_agent"
        function: "convert_to_tickets"
      - name: "티켓 저장"
        agent: "gmail_ticket_agent"
        function: "save_tickets" 